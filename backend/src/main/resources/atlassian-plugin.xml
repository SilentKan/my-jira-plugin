<?xml version="1.0" encoding="UTF-8"?>
<atlassian-plugin key="com.example.my-jira-plugin-backend"
                  name="My Plugin"
                  plugins-version="2">

  <plugin-info>
    <description>My plugin description</description>
    <version>1.0.2</version>
    <vendor name="Example Company" url="https://example.com"/>
  </plugin-info>


  <!-- ЯВНО перечисляем каждую сущность AO.
       В Jira 10  — добавляйте <entity> на каждую интерфейс-сущность. -->
  <ao key="ao-module" name="My Active Objects">
    <description>Defines AO module</description>
    <entity>com.example.plugin.ao.MyRecord</entity>
    <!-- Новые сущности => новые <entity> строки. Следите, чтобы интерфейсы AO были видимы плагину. -->
  </ao>

  <!-- Основные артефакты бандла из webpack-вывода, wrm и атласиан плагин не используется. -->
  <web-resource key="split_my-plugin">
    <resource type="download" name="css/my-plugin.css" location="css/my-plugin.css"/>
    <resource type="download" name="js/my-plugin.js" location="js/my-plugin.js"/>
  </web-resource>


  <!-- [SERVLET][UI] Отдельная страница под React.
       Итоговый URL: /plugins/servlet/my-react-page -->
  <servlet name="My React Page Servlet"
           key="my-react-page"
           class="com.example.plugin.MyReactPageServlet">
    <url-pattern>/my-react-page</url-pattern>
    <load-on-startup>1</load-on-startup>
  </servlet>


  <!-- [REST][JIRA10] Ресурсы REST сканируются по пакету Jersey (HK2).
      Держим классы @Path в com.example.plugin.api.*.
      Не мешай HK2 и Spring без осознанного бриджа: используй конструкторную инъекцию -->
  <rest key="my-rest" path="/myplugin" version="1.0">
    <description>Provides REST endpoints for the plugin</description>
    <package>com.example.plugin.api</package>
  </rest>

  <!-- Секция в меню администратора -->
  <!-- Секция в левом меню -->
  <web-section key="react-ui-section" location="admin_plugins_menu" weight="100">
    <label>React UI</label>
  </web-section>

  <web-item key="react-ui-item" section="admin_plugins_menu/react-ui-section" weight="10">
    <label>My React Page</label>
    <link>/plugins/servlet/my-react-page</link>
  </web-item>

</atlassian-plugin>
